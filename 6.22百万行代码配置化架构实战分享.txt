报告人：刘志伟，百度技术改建

1.搜索引擎代码设计	代码级改进（影响有限）
2.配置化架构		架构级改进（大规模改进）

技术改进：最终要看解决了哪些业务问题，而不能为了技术而技术（代价：投入和收益不符合）

一、搜索引擎模块改进
	1.“高速路上换车轮”
	2.找到领域模型，重构复杂度
	背景：搜索引擎：
		1.抓取网页分析网页存储逆向索引
		2.用用户关键字搜索网页结果
	三层架构：
		用户输入层
		逻辑控制层
		网页存储交互数据转换层
	核心模块：Advanced control百度检索最核心的模块：
		1.扩展关键字
		2.网页排序过滤摘要
	核心模块功能：
		1.变换关键字（query modeling and tokenization）
		2.关键字符合结果（recall）
	问题：多次回滚->分析近期roll back：过度耦合
	40w C++代码，变动非常频繁：10story per week, 200 people per year
	cannot simply folking: cannot meet requirement adjucement->”高速路上换车轮“
		1.小步快跑
			每天频繁check in每天三次以上，完备的自动化测试（重构之前需要构建安全网）模块、系统、性能测试等，自动化测试成功再发布
			adv:代码更改能被他人即使看到，能够在高速迭代的时候重构代码，避免大型merge带来大量问题
		2.演进式设计
			期望看到一个预先设计好的代码设计
			但并不清楚最终重构的代码结果：原因：很难在段时间内透彻所有业务，透彻业务的负责人不负责代码
			只有一个大目标：高内聚低耦合
			从一个点开始：clean code
			三层次发展：
				1.clean code。代码可读易懂，函数层次抽象，隐藏实现细节，避免意图和实现细节耦合，避免代码级甚至功能级的重复->用同样的组建替代
				2.单一职责、正交设计、关注点分离，关注点方向不同而分离-->高内聚低耦合
				3.架构层次服务化、领域驱动设计
			上面都是表面，深层次的抽象是软件模型要向业务模型上靠
				偶发成本：实际实现比最简方案多出来的成本->重构的目的：达到本质复杂度

二、计算广告
	几十个近百个模块组成：
		问题：
			如何快速提供服务
			快速变动系统满足业务需求
	背景：软件迭代速度快速，死亡率高->快速实现业务调整是重大问题
	设计到技术产品项目管理等多方面
	例子：
		百度计算广告系统，发展11年，百万级cpp、java，上百人工作，大量业务迭代，
		cpp编译速度慢，需要重启，影响对外提供服务
		计算广告改造：
			组建化、配置化等
			配置：capability代码中的对象属性用通用数据格式表述，如threshold、开关、消息发送时间、三方库
			衍生定义：rest中软件定义，描述架构的语言，配置的semantic宽泛，不仅仅通过xml描述，已经是描述架构的描述，借鉴广义配置定义
			配置化架构
				1.能对业务进行描述
				2.对架构进行组织
				3.infrastracture
			实验：调整广告发布格式，选取小部分人调查是否调整与收入正相关，用cookie区分用户，作出小改动查看结果
			=>配置化架构使用实验作切入点
			会有很多地方用到配置化表达->插件化设计
		基础设施：
			原来窗口化表达不能达到要求->配置dialog化
			有多点可以理解：配置丢进来处罚流水线->业务校验->自动化测试->部署灰度发布
			用配置表达业务，加快系统变更
			组建化编排：调整配置拼起组件，组件结构是DAG，组建本身和组建之间的关系都是配置表达
			实现方式依据目的的复杂程度不同从xml到模型+dsl
			如：facebook的git+zookeeper
			配置管理服务：例如用mysql+前端等，只是要构建配置管理的服务，由业务场景不同而决定
			配置管理框架：如IBM的数据库，json+logic semantic
	核心：
		为软件系统的变动快速作出变更divelogs？
	facebook：每天代码迭代两次，配置迭代千次，把业务用配置来表达
